!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.imer={})}(this,function(e){"use strict";function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u=Symbol("state");function l(e,t,r){var n=r.originalValue,o=r.draftValue,f=r.onWrite;return p(e,function(e){o.mutated||(r.mutated=!0,a(o,n)),o[t]=e,f&&f(o)})}function a(r,n){if(Array.isArray(r))for(var e=0;e<n.length;e++)e in r||(r[e]=n[e]);else Reflect.ownKeys(n).forEach(function(e){var t=Object.getOwnPropertyDescriptor(n,e);e in r||Object.defineProperty(r,e,t)})}function i(e){var t=e.originalValue,r=e.draftValue,n=e.mutated,o=e.onWrite;n||(e.mutated=!0,o&&o(r),a(r,t))}function y(e){return e.mutated?e.draftValue:e.originalValue}function p(o,e){var f=Array.isArray(o)?[]:function(e){return Object.create(Object.getPrototypeOf(e))}(o),n=Object.create(null),a={originalValue:o,draftValue:f,mutated:!1,onWrite:e};return new Proxy(o,{get:function(e,t,r){return t===u?a:t in n?n[t]:"object"===c(o[t])&&null!==o[t]?(n[t]=l(o[t],t,a),n[t]):a.mutated?f[t]:Reflect.get(e,t,r)},set:function(e,t,r){return"object"===c(r)&&(n[t]=l(r,t,a)),i(a),f[t]=r,!0},has:function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Reflect.has.apply(Reflect,[y(a)].concat(r))},ownKeys:function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Reflect.ownKeys.apply(Reflect,[y(a)].concat(r))},getOwnPropertyDescriptor:function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Reflect.getOwnPropertyDescriptor.apply(Reflect,[y(a)].concat(r))},getPrototypeOf:function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Reflect.getPrototypeOf.apply(Reflect,[o].concat(r))},deleteProperty:function(e){i(a);for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Reflect.deleteProperty.apply(Reflect,[f].concat(r))},defineProperty:function(e){i(a);for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Reflect.defineProperty.apply(Reflect,[f].concat(r))},setPrototypeOf:function(e){i(a);for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Reflect.setPrototypeOf.apply(Reflect,[f].concat(r))}})}e.produce=function(e,t){var r=p(e);t(r);var n=r[u],o=n.originalValue,f=n.draftValue;return n.mutated?f:o},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=index.min.js.map
